# –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Planner MVP

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (–§–∞–∑–∞ 1 - MVP)

### Backend (Cloudflare Worker + Hono)

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (D1/SQLite)**
   - ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `0002_tasks_system.sql` —Å –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º–æ–π
   - ‚úÖ –¢–∞–±–ª–∏—Ü—ã: users, tasks, tags, task_tags, recurrence_rules, task_instances, task_shares, friendships, task_history
   - ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã

2. **TypeScript —Ç–∏–ø—ã**
   - ‚úÖ –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–∏–ø–æ–≤ –≤ `src/types/index.ts`
   - ‚úÖ Task, Tag, User, RecurrenceRule, TaskShare, Friendship
   - ‚úÖ DTO —Ç–∏–ø—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - ‚úÖ –§–∏–ª—å—Ç—Ä—ã –∏ —Ç–∏–ø—ã –¥–ª—è API –æ—Ç–≤–µ—Ç–æ–≤

3. **Middleware**
   - ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω `authMiddleware` —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Firebase —Ç–æ–∫–µ–Ω–∞
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ email

4. **API Routes**
   - ‚úÖ `/api/tasks` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (GET, POST, PATCH, DELETE)
   - ‚úÖ `/api/tasks/:id/archive` - –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –∑–∞–¥–∞—á
   - ‚úÖ `/api/tasks/:id/duplicate` - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
   - ‚úÖ `/api/tags` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ–≥–æ–≤
   - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –∑–∞–¥–∞—á

5. **Services**
   - ‚úÖ `TaskService` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∑–∞–¥–∞—á
   - ‚úÖ `TagService` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ç–µ–≥–æ–≤
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
   - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

### Frontend (React + TypeScript + Material-UI)

1. **–†–æ—É—Ç–∏–Ω–≥**
   - ‚úÖ React Router —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - ‚úÖ `AppRouter.tsx` —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
   - ‚úÖ –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
   - ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Drawer –∏ BottomNavigation

2. **API –∫–ª–∏–µ–Ω—Ç**
   - ‚úÖ `src/utils/api.ts` —Ä–∞—Å—à–∏—Ä–µ–Ω
   - ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–∞–º–∏: getTasks, createTask, updateTask, deleteTask, archiveTask, duplicateTask
   - ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–≥–∞–º–∏: getTags, createTag, updateTag, deleteTag
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

3. **–°—Ç—Ä–∞–Ω–∏—Ü—ã**
   - ‚úÖ **Dashboard** (`src/pages/Dashboard.tsx`)
     - –í–∏–¥–∂–µ—Ç "–ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è"
     - –í–∏–¥–∂–µ—Ç "–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ –∑–∞–¥–∞—á–∏"
     - –í–∏–¥–∂–µ—Ç "–†–∞—Å—à–∞—Ä–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏"
     - FAB –∫–Ω–æ–ø–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
   
   - ‚úÖ **TaskListPage** (`src/pages/TaskListPage.tsx`)
     - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–¥–∞—á
     - –§–∏–ª—å—Ç—Ä—ã: —Å—Ç–∞—Ç—É—Å, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –ø–æ–∏—Å–∫
     - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º
     - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `?date=YYYY-MM-DD` –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

4. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - ‚úÖ **TaskCard** (`src/components/tasks/TaskCard.tsx`)
     - –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
     - –ß–µ–∫–±–æ–∫—Å –¥–ª—è —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞
     - –ß–∏–ø—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞, —Å—Ç–∞—Ç—É—Å–∞, —Ç–µ–≥–æ–≤
     - –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–¥–µ–ª–∏—Ç—å—Å—è, –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª–∏—Ç—å)
     - –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–∞—Å—à–∞—Ä–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
   
   - ‚úÖ **TaskForm** (`src/components/tasks/TaskForm.tsx`)
     - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
     - DateTimePicker –¥–ª—è –¥–∞—Ç—ã/–≤—Ä–µ–º–µ–Ω–∏ (MUI X Date Pickers)
     - –í—ã–±–æ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞
     - –ú—É–ª—å—Ç–∏–≤—ã–±–æ—Ä —Ç–µ–≥–æ–≤ —Å Autocomplete
     - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π
     - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ–∫–±–æ–∫—Å–∞ "–ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –∑–∞–¥–∞—á–∞"

5. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å**
   - ‚úÖ **Calendar** (`src/components/Calendar.tsx`) –æ–±–Ω–æ–≤–ª—ë–Ω
     - –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
     - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ –¥–Ω—è—Ö:
       - –¶–≤–µ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
       - –ß–∏–ø —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–¥–∞—á
     - –ö–ª–∏–∫ –Ω–∞ –¥–µ–Ω—å ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/tasks?date=YYYY-MM-DD`
     - Tooltip —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–¥–∞—á
     - –õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
     - –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫

6. **UI/UX**
   - ‚úÖ –¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
   - ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
   - ‚úÖ Drawer –Ω–∞–≤–∏–≥–∞—Ü–∏—è
   - ‚úÖ Bottom Navigation –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
   - ‚úÖ –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

```bash
npm install nanoid                  # ID –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
npm install react-router-dom        # –†–æ—É—Ç–∏–Ω–≥
npm install @mui/x-date-pickers     # Date/Time pickers
npm install date-fns                # Date utilities
```

---

## üîÑ –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –∫ Cloudflare D1

```bash
# –°–æ–∑–¥–∞—Ç—å D1 –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç)
wrangler d1 create planer-db

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
wrangler d1 execute planer-db --local --file=./migrations/0001_initial.sql
wrangler d1 execute planer-db --local --file=./migrations/0002_tasks_system.sql

# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
wrangler d1 execute planer-db --file=./migrations/0001_initial.sql
wrangler d1 execute planer-db --file=./migrations/0002_tasks_system.sql
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å wrangler.jsonc

–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–≤—è–∑–∫—É –∫ D1:

```jsonc
{
  "name": "planer",
  "compatibility_date": "2024-01-01",
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "planer-db",
      "database_id": "YOUR_DATABASE_ID"
    }
  ]
}
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

```bash
# Frontend + Worker –ª–æ–∫–∞–ª—å–Ω–æ
npm run dev

# –ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ worker
wrangler dev

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ frontend
vite dev
```

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

### –§–∞–∑–∞ 2: –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- ‚è≥ API –¥–ª—è –¥—Ä—É–∑–µ–π (`/api/friends`)
- ‚è≥ API –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞ –∑–∞–¥–∞—á (`/api/tasks/:id/share`)
- ‚è≥ UI —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–î—Ä—É–∑—å—è" (`src/pages/FriendsPage.tsx`)
- ‚è≥ UI —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–†–∞—Å—à–∞—Ä–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏" (`src/pages/SharedTasksPage.tsx`)
- ‚è≥ –î–∏–∞–ª–æ–≥ —à–∞—Ä–∏–Ω–≥–∞ –∑–∞–¥–∞—á–∏ (`ShareTaskDialog.tsx`)

### –§–∞–∑–∞ 3: –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

- ‚è≥ API –¥–ª—è recurrence rules (`/api/tasks/:id/recurrence`)
- ‚è≥ Cron Worker –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤
- ‚è≥ UI –¥–∏–∞–ª–æ–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç–∏ (`RecurrenceDialog.tsx`)
- ‚è≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

### –§–∞–∑–∞ 4: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏

- ‚è≥ –ú–µ–Ω–µ–¥–∂–µ—Ä —Ç–µ–≥–æ–≤ (`src/pages/TagManager.tsx`)
- ‚è≥ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –∑–∞–¥–∞—á–∏ (`TaskDetailPage.tsx`)
- ‚è≥ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–¥–∞—á (`TaskHistory.tsx`)
- ‚è≥ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Capacitor)
- ‚è≥ Offline-—Ä–µ–∂–∏–º (Service Worker + IndexedDB)
- ‚è≥ Drag & Drop –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

---

## üéØ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**MVP –≥–æ—Ç–æ–≤ –Ω–∞ ~70%!**

–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- ‚úÖ –¢–µ–≥–∏ (CRUD —á–µ—Ä–µ–∑ API, UI pending)
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ Dashboard —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏
- ‚úÖ –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –†–æ—É—Ç–∏–Ω–≥

–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω–æ–π D1 –±–∞–∑–æ–π
- UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–∞–º–∏
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –∑–∞–¥–∞—á–∏
- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–¥—Ä—É–∑—å—è, —à–∞—Ä–∏–Ω–≥)
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `worker/types.ts` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `DB` –≤ `Env` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –í–æ–∑–º–æ–∂–Ω—ã TypeScript –æ—à–∏–±–∫–∏ –≤ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä)
3. MUI Date Pickers —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
4. Capacitor build –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–ø–æ –ø—Ä–∞–≤–∏–ª–∞–º)
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- –ö–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ —Å–ª–µ–¥—É–µ—Ç best practices
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞









